<div class="container-fluid p-h-0 p-v-20 h-100" style="background-image: url('assets/images/e-commerce/bg3.png');">
  <div style="padding:2rem">
    <div class="page-header has-tab align-items-center text-center">
      <nz-tag nzColor="success" *ngIf="form">{{form.name}}</nz-tag>
      <nz-progress [nzPercent]="99.9" [nzStrokeColor]="{ '0%': '#108ee9', '100%': '#87d068' }"
        nzStatus="active"></nz-progress>
    </div>
    <nz-tabset class="page-header-tab" *ngIf="form">
      <nz-tab nzTitle="{{'general.antes_de_empezar'|translate}}" *ngIf="!establishment">
        <div class="container">
          <nz-card nzTitle="{{'general.completa_info'|translate}}">
            <div class="d-flex flex-column justify-content-between h-100">
              <div class="d-none d-md-block"></div>
              <div class="row align-items-center">
                <div class="col-md-7 col-lg-5 m-h-auto">
                  <div class="d-flex align-items-center justify-content-between m-b-30">
                    <img class="img-fluid" alt="" src="assets/images/logo/logo-min.png">
                  </div>
                  <form nz-form [formGroup]="establishmentForm" nzLayout="vertical" class="login-form"
                    (ngSubmit)="submitForm(establishmentForm.value)">
                    <nz-form-item>
                      <nz-form-label nzRequired nzFor="name">{{'general.nombre'|translate}}</nz-form-label>
                      <nz-form-control [nzErrorTip]="nameErrorTpl">
                        <nz-input-group [nzPrefix]="prefixUser">
                          <input type="text" nz-input formControlName="name" [placeholder]="'general.nombre'|translate">
                        </nz-input-group>
                        <ng-template #nameErrorTpl let-control>
                          <ng-container *ngIf="control.hasError('required')">{{"validaciones.nombre_requerido" |
                            translate}}</ng-container>
                        </ng-template>
                      </nz-form-control>
                    </nz-form-item>

                    <nz-form-item>
                      <nz-form-label nzRequired nzFor="email">{{'general.correo'|translate}}</nz-form-label>
                      <nz-form-control [nzErrorTip]="nameErrorTpl">
                        <nz-input-group [nzPrefix]="prefixEmail">
                          <input type="email" nz-input formControlName="email"
                            [placeholder]="'general.correo'|translate">
                        </nz-input-group>
                        <ng-template #nameErrorTpl let-control>
                          <ng-container *ngIf="control.hasError('required')">{{"validaciones.correo_requerido" |
                            translate}}</ng-container>
                        </ng-template>
                      </nz-form-control>
                    </nz-form-item>

                    <nz-form-item>
                      <nz-form-label nzFor="company">{{'general.empresa'|translate}}</nz-form-label>
                      <nz-form-control>
                        <nz-input-group [nzPrefix]="prefixCompany">
                          <input type="text" nz-input formControlName="company"
                            [placeholder]="'general.empresa'|translate">
                        </nz-input-group>
                      </nz-form-control>
                    </nz-form-item>

                    <nz-form-item>
                      <nz-form-control>
                        <div class="d-flex align-items-center justify-content-center">
                          <button nz-button class="login-form-button" [nzType]="'primary'"
                            [disabled]="!establishmentForm.valid">Empezar</button>
                        </div>
                      </nz-form-control>
                    </nz-form-item>
                  </form>
                  <ng-template #prefixUser><i nz-icon nzType="user"></i></ng-template>
                  <ng-template #prefixEmail><i nz-icon nzType="mail"></i></ng-template>
                  <ng-template #prefixCompany><i nz-icon nzType="home"></i></ng-template>
                </div>
              </div>
            </div>
          </nz-card>
        </div>
      </nz-tab>

      <nz-tab nzTitle="{{'general.bienvenido'|translate}}" *ngIf="establishment">
        <div class="container">
          <nz-card nzTitle="{{establishment.name}}">
            <div class="d-flex flex-column justify-content-between h-100">
              <div class="d-none d-md-block"></div>
              <div class="row align-items-center">
                <div class="col-md-7 col-lg-5 m-h-auto">
                  <div class="d-flex align-items-center justify-content-between m-b-30">
                    <img class="img-fluid" alt="" src="assets/images/logo/logo-min.png">
                  </div>
                </div>
              </div>
            </div>
          </nz-card>
        </div>
      </nz-tab>

      <div *ngIf="establishment">
        <nz-tab *ngFor=" let component of form.components" nzTitle="{{component.name}}">
          <div class="container">
            <div class="row">
              <div class="col-md-12 mx-auto" *ngFor="let subTopic of component.sub_topics">
                <nz-card nzTitle="{{subTopic.name}}">
                  <nz-list [nzDataSource]="subTopic.questions" [nzRenderItem]="network" [nzItemLayout]="'horizontal'">
                    <ng-template #network let-question>
                      <nz-list-item [nzActions]="[moreAction]">
                        <ng-template #moreAction>
                          <div *ngIf="question.type=='si_no'">
                            <nz-switch [ngModel]="question.status" [nzCheckedChildren]="checkedTemplate"
                              [nzUnCheckedChildren]="unCheckedTemplate"></nz-switch>
                            <ng-template #checkedTemplate><i class="font-size-12" nz-icon
                                nzType="check"></i></ng-template>
                            <ng-template #unCheckedTemplate><i class="font-size-12" nz-icon nzType="close"></i>
                            </ng-template>
                          </div>
                          <div *ngIf="question.type=='rango_1_5'">
                            <nz-rate [ngModel]="0" [nzCharacter]="characterNumber"></nz-rate>
                            <ng-template #characterNumber let-index>
                              {{ index + 1 }}
                            </ng-template>
                            <ng-template #characterIcon let-index>
                              <ng-container [ngSwitch]="index">
                                <span nz-icon nzType="frown" *ngSwitchCase="1"></span>
                                <span nz-icon nzType="frown" *ngSwitchCase="2"></span>
                                <span nz-icon nzType="meh" *ngSwitchCase="3"></span>
                                <span nz-icon nzType="smile" *ngSwitchCase="4"></span>
                                <span nz-icon nzType="smile" *ngSwitchCase="5"></span>
                              </ng-container>
                            </ng-template>
                          </div>
                        </ng-template>

                        <nz-list-item-meta [nzTitle]="networkName" [nzAvatar]="networkIcon">
                          <ng-template #networkName>
                            <div class="font-size-15 font-weight-semibold m-t-10">{{question.name}}</div>
                          </ng-template>
                        </nz-list-item-meta>
                      </nz-list-item>
                      <div *ngIf="question.type=='relacionada'">
                        <nz-divider nzText="Opciones"></nz-divider>
                        <nz-checkbox-wrapper style="width: 100%;">
                          <div nz-row>
                            <div nz-col nzSpan="12" *ngFor="let child of question.children">
                              <label nz-checkbox nzValue="{{child.id}}">{{child.name}}
                              </label>
                            </div>
                          </div>
                        </nz-checkbox-wrapper>
                      </div>
                    </ng-template>
                  </nz-list>
                </nz-card>
              </div>
            </div>
          </div>
        </nz-tab>
      </div>

      <!-- <nz-tab nzTitle="{{'general.resumen'|translate}}">
        <div class="container">
          <div class="row">
            <div class="col-md-8 mx-auto">
              <nz-card nzTitle="Notification Config">
                <nz-list [nzDataSource]="notificationConfigList" [nzRenderItem]="'general.resumen'"
                  [nzItemLayout]="'horizontal'">
                  <ng-template #resumen let-item>
                    <nz-list-item [nzActions]="[configStatus]">
                      <ng-template #configStatus>
                        <nz-switch [ngModel]="item.status" [nzCheckedChildren]="checkedTemplate2nd"
                          [nzUnCheckedChildren]="unCheckedTemplate2nd"></nz-switch>
                        <ng-template #checkedTemplate2nd><i class="font-size-12" nz-icon
                            nzType="check"></i></ng-template>
                        <ng-template #unCheckedTemplate2nd><i class="font-size-12" nz-icon
                            nzType="close"></i></ng-template>
                      </ng-template>
                      <nz-list-item-meta [nzTitle]="notificationTitle" [nzAvatar]="notificationIcon">
                        <ng-template #notificationIcon>
                          <nz-avatar [nzIcon]="item.icon" [ngClass]="item.color" class="m-t-5"></nz-avatar>
                        </ng-template>
                        <ng-template #notificationTitle>
                          <h5 class="font-weight-semibold m-b-0">{{item.title}}</h5>
                          <p class="m-b-0 font-weight-normal">{{item.desc}}</p>
                        </ng-template>
                      </nz-list-item-meta>
                    </nz-list-item>
                  </ng-template>
                </nz-list>
              </nz-card>
            </div>
          </div>
        </div>
      </nz-tab> -->
    </nz-tabset>
  </div>
</div>
